<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freelancer Portfolio | Freelancers Connect</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <style>
        /* Body styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            margin: 0;
            padding: 0;
        }

        /* Container styles */
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 15px;
            position: relative; /* Added position relative for absolute positioning of links */
        }

        /* Profile card styles */
        .profilearea {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }

        .profilearea img {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
        }

        .profilearea h3,
        .profilearea h4 {
            margin-top: 10px;
            margin-bottom: 5px;
        }

        .profilearea p {
            margin-bottom: 10px;
        }

        /* Portfolio details styles */
        .portfolio-details {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        .portfolio-details h2 {
            margin-top: 0;
            margin-bottom: 20px;
        }

        /* Previous contracts styles */
        .previous-contracts {
            margin-bottom: 20px;
        }

        /* Videos styles */
        .videos,
        .picture-examples,
        .write-ups,
        .owner-updates {
            margin-bottom: 20px;
        }

        .videos h3,
        .picture-examples h3,
        .write-ups h3,
        .owner-updates h3 {
            margin-top: 0;
            margin-bottom: 15px;
        }

        .video-embed {
            margin-bottom: 20px;
        }

        .video-embed iframe {
            border: 0;
            border-radius: 5px;
        }

        .image-gallery img {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .owner-updates textarea {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
        }

        .owner-updates button {
            padding: 10px 20px;
            border: none;
            background-color: #007bff;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
        }

        .owner-updates button:hover {
            background-color: #0056b3;
        }

        /* Responsive styles */
        @media (max-width: 767px) {
            .col-lg-4 {
                flex: 0 0 100%;
                max-width: 100%;
            }
        }

        /* Additional styles */
        .profilearea-profile-card {
            text-align: center;
        }

        .profilearea-profile-name {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .profilearea-category {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .profilearea-item-text {
            font-size: 16px;
        }

        .profilearea-btn-primary {
            display: inline-block;
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .profilearea-btn-primary:hover {
            background-color: #0056b3;
        }

        /* Back and Home Links */
        .back-home-links {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
        }

        .back-home-links a {
            text-decoration: none;
            color: #007bff;
            font-weight: bold;
            margin-right: 10px;
            transition: color 0.3s ease;
        }

        .back-home-links a:hover {
            color: #0056b3;
        }
    </style>
</head>

<body>
    <!-- Back and Home Links -->
    <div class="back-home-links">
        <a href="javascript:history.back()"><i class="fas fa-arrow-left"></i>
            Back</a>
        <a href="./freelancedashboard.html"><i class="fas fa-home"></i>
            Home</a>
    </div>

    <div class="container">
        <div class="row">
            <!-- Profile Section -->
            <div class="col-lg-4 rounded-3">
                <div class="profilearea" id="profileContainer">
                    <!-- Profile card will be dynamically generated here -->
                </div>
            </div>
            <!-- Portfolio Details Column -->
            <div class="col-lg-8">
                <div class="portfolio-details">
                    <h2>Portfolio Details</h2>
                    <!-- Previous Contracts -->
                    <div class="previous-contracts">
                        <!-- generated portfolio from the information of the user will show here -->
                    </div>
                    <!-- Videos -->
                    <div class="videos">
                        <h3>Videos</h3>
                        <!-- Video Embeds -->
                        <div class="video-embed">
                            <iframe width="560" height="315" src="https://www.youtube.com/embed/VIDEO_ID" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                        <!-- Add more video embeds as needed -->
                    </div>
                    <!-- Picture Examples -->
                    <div class="picture-examples">
                        <h3>Picture Examples</h3>
                        <!-- Image Gallery -->
                        <div class="image-gallery">
                            <img src="example1.jpg" alt="Example 1">
                            <img src="example2.jpg" alt="Example 2">
                            <!-- Add more images as needed -->
                        </div>
                    </div>
                    <!-- Write-ups -->
                    <div class="write-ups">
                        <h3>Write-ups</h3>
                        <!-- Text Content -->
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed ut metus urna. Donec eu nibh nec metus luctus lacinia non vitae tortor.</p>
                        <!-- Add more write-ups as needed -->
                    </div>
                    <!-- Owner Updates -->
                    <div class="owner-updates">
                        <h3>Owner Updates</h3>
                        <textarea id="ownerUpdates" rows="4" cols="50"></textarea>
                        <button onclick="addOwnerUpdate()">Add Update</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Common JavaScript Function -->
    <script>
        // Function to handle form submission and send data to the server
        function handleFormSubmission(event) {
            event.preventDefault(); // Prevent default form submission

            // Get form data
            const projectTitle = document.getElementById("projectTitle").value;
            const projectDescription = document.getElementById("projectDescription").value;
            const projectImages = document.getElementById("projectImages").files;

            // Check if form is empty
            if (!projectTitle && !projectDescription && projectImages.length === 0) {
                // Create demo array
                createDemoArray();
            } else {
                // Pass form details
                passFormDetails(projectTitle, projectDescription, projectImages);
            }
        }

        // Function to create a demo array
        function createDemoArray() {
            const demoPortfolio = [
                {
                    title: "Project Title 1",
                    description: "Description for Project 1",
                    images: ["example1.jpg", "example2.jpg"]
                },
                {
                    title: "Project Title 2",
                    description: "Description for Project 2",
                    images: ["example3.jpg", "example4.jpg"]
                }
                // Add more default portfolio details as needed
            ];

            displayPortfolioDetails(demoPortfolio);
        }

        // Function to pass form details
        function passFormDetails(projectTitle, projectDescription, projectImages) {
            // Create FormData object to send files along with other form data
            const formData = new FormData();
            formData.append("projectTitle", projectTitle);
            formData.append("projectDescription", projectDescription);
            for (let i = 0; i < projectImages.length; i++) {
                formData.append("projectImages", projectImages[i]);
            }

            // Send data to the server
            fetch("/create-portfolio-endpoint", {
                method: "POST",
                body: formData
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Network response was not ok");
                }
                return response.json();
            })
            .then(data => {
                console.log("Portfolio created successfully:", data);
                // Optionally, provide feedback to the user
                alert("Portfolio created successfully!");
                // Redirect to portfolio page or update UI as needed
            })
            .catch(error => {
                console.error("Error creating portfolio:", error);
                // Optionally, provide feedback to the user
                alert("An error occurred while creating your portfolio. Please try again later.");
            });
        }
    </script>

    <!-- Profile JavaScript -->
    <script>
        // Define an array to store profile data
        let profiles = []; // This array will store the profile data pushed from the profile page

        // Define a demo profile to display when there are no registered users
        const demoProfile = {
            id: 13,
            name: "Valentine Uchenna",
            category: "Web Developer",
            skills: ["HTML", "CSS", "JavaScript"],
            img: "./freelance-images/uche.jpg",
            bio: "Experienced web developer with expertise in front-end technologies.",
            contact: "valentinevalobt@gmail.com",
        };

        // Function to retrieve profile data from local storage
        function retrieveProfiles() {
            let storedProfiles = localStorage.getItem('profiles');
            if (storedProfiles) {
                profiles = JSON.parse(storedProfiles);
            }
        }

        // Function to generate profile card for the first profile (either from local storage or default profiles)
        function generateSingleProfileCard() {
            let profileContainer = document.getElementById('profileContainer');
            profileContainer.innerHTML = ''; // Clear previous profile card

            // Get the first profile from either stored profiles or default profiles
            let profile = profiles.length > 0 ? profiles[0] : demoProfile;

            // Create profile card elements
            let profileCard = document.createElement('div');
            profileCard.classList.add('profilearea', 'profilearea-profile-card');

            let profileImage = document.createElement('img');
            profileImage.src = profile.img;
            profileImage.classList.add('profilearea-profile-image');
            profileImage.alt = 'Profile Image';

            let profileName = document.createElement('h3');
            profileName.classList.add('profilearea-profile-name');
            profileName.textContent = profile.name;

            let profileCategory = document.createElement('h4');
            profileCategory.classList.add('profilearea-category');
            profileCategory.textContent = profile.category;

            let profileInfo = document.createElement('p');
            profileInfo.classList.add('profilearea-item-text');
            profileInfo.textContent = profile.bio;

            let viewProfileLink = document.createElement('a');
            viewProfileLink.href = 'mailto:' + profile.contact;
            viewProfileLink.classList.add('btn', 'btn-primary', 'profilearea-btn-primary');
            viewProfileLink.textContent = 'Profile & Portfolio';

            // Append elements to profile card
            profileCard.appendChild(profileImage);
            profileCard.appendChild(profileName);
            profileCard.appendChild(profileCategory);
            profileCard.appendChild(profileInfo);
            profileCard.appendChild(viewProfileLink);

            // Append profile card to container
            profileContainer.appendChild(profileCard);
        }

        // Retrieve profile data from local storage and generate profile card when the page loads
        retrieveProfiles();
        generateSingleProfileCard();
    </script>

    <!-- Owner Update JavaScript -->
    <script>
        // Add JavaScript code to handle owner updates
        function addOwnerUpdate() {
            // Get owner update text
            const ownerUpdateText = document.getElementById("ownerUpdates").value;
            // Handle owner update submission, for example, sending data to server
            console.log("Owner update:", ownerUpdateText);
            // Clear owner update text area after submission
            document.getElementById("ownerUpdates").value = '';
        }
    </script>

    <!-- Call the Common Function for Portfolio Submission -->
    <script>
        document.getElementById("portfolioForm").addEventListener("submit", handleFormSubmission);
    </script>
</body>

</html>
